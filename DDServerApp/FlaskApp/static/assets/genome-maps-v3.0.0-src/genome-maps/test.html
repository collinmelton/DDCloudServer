<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Genome Maps</title>
	<link rel="stylesheet" type="text/css" href="/static/assets/sencha/resources/css/ext-all-gray.css">
	<!-- <link rel="stylesheet" type="text/css" href="http://cdn.sencha.com/ext/gpl/4.1.1/resources/css/ext-all-gray.css"> -->
	
	<link rel="stylesheet" type="text/css" href="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/ChemDoodleWeb/install/ChemDoodleWeb.css">
	<link rel="stylesheet" type="text/css" href="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/jquery-plugins/jquery.qtip.min.css">
 	<link rel="stylesheet" type="text/css" href="/static/assets/genome-maps-v3.0.0-src/genome-maps/libs/resources/css/style.css">  
	<!-- <script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-16414504-2']);
	  _gaq.push(['_trackPageview']);
	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script> -->
	<script type="text/javascript" src="/static/assets/sencha/ext-all.js"></script>
	<script type="text/javascript" src="/static/assets/sencha/examples.js"></script>
	<script type="text/javascript" src="/static/assets/jquery/jquery-2.1.1.min.js"></script>
	<!-- <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> -->
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/jquery-plugins/jquery.qtip.min.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/jquery-plugins/jquery.sha1.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/jquery-plugins/jquery.url.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/jquery-plugins/jquery.cookie.js"></script>  
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/jquery-plugins/jqXMLUtils.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/jquery-plugins/jquery.smartresize.js"></script>
	
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/xml2json.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/svg/base64.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/svg/canvas2image.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/svg/canvg.js"></script> 
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/svg/rgbcolor.js"></script> 
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/rawdeflate.js"></script> 
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/ChemDoodleWeb/install/ChemDoodleWeb-libs.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/ext-libs/ChemDoodleWeb/install/ChemDoodleWeb.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/config/gm-config.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/config/gm-plugins-config.json"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/plugins/generic-plugin.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/plugins/my-plugin.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/plugins/expression.js"></script>
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/plugins/genotype.js"></script>

	<!-- <script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/genome-maps-3.0.4.min.js"></script> -->
	<script type="text/javascript" src="/static/assets/genome-maps-v3.0.0-src/genome-maps/genome-maps-3.0.4.js"></script>

	<script>
    WORKERS_PATH = "../js-common-libs/opencga/ui-widgets/";
	Ext.Loader.setConfig({enabled: true});
	// Ext.Loader.setPath('Ext.ux', 'http://cdn.sencha.com/ext/gpl/4.1.1/examples/ux');
	Ext.Loader.setPath('Ext.ux', '/static/assets/sencha/examples/ux');
	Ext.QuickTips.init();
	Ext.require([
	    'Ext.ux.grid.FiltersFeature',
	    'Ext.grid.PagingScroller',
	    'Ext.ux.data.PagingMemoryProxy'
	]);
	var counter = 1000000;
	function test(ms,positions){
		if (ms==null){ms = 200;}
		if (positions==null){positions = 250000;}
		genomeMaps.genomeViewer.trackSvgLayout.onMove.notify(-1);
		setTimeout("test()", ms);
		counter = counter + positions;
	}
	Ext.onReady(run);
	var genomeMaps;
	function run(){
		CheckBrowser();
		genomeMaps = new GenomeMaps("mydiv"); //the div must exist
		genomeMaps.draw();
		if($.url().param('test') == "true") {
			setTimeout("test()", 2000);
		}
	    console.log("loading bam track");
   		var updateActiveTracksPanel = function(trackType, trackTitle, trackId, showActive) {
            var newNode = genomeMaps.activeSt.getRootNode().appendChild({text: trackTitle, trackId:trackId, trackType:trackType, leaf: true, checked:true, iconCls:"icon-blue-box"});
            Ext.example.msg("Track "+trackType,"actived");
            if(showActive == true){
                Ext.getCmp(genomeMaps.id+"activeTracksTree").expand();
            }
        };
        var type = "bam";
	    var text = "cp4.HA27JADXX_SNY-1_GCTAACGA_L001_001.normal.RG.sorted.bam";
	    var bamfile = "/Users/cmelton/Documents/Lab/SnyderLab/TestData/cp4.HA27JADXX_SNY-1_GCTAACGA_L001_001.normal.RG.sorted.bam";
	    var id = genomeMaps.addTrack(type, text, bamfile, OPENCGA_LOCALHOST);
	    if(id != null){
	        var title = text;
	        updateActiveTracksPanel(type, title, id, true);
	    }
	}
	</script>
</head>
<body style="overflow: hidden">
	<div id="checkBrowser"></div>
	<div id="mydiv"></div>
</body>
</html>
